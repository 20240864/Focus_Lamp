好的，遵照您的要求，我将根据您提供的文件内容，生成一套量化的数学公式。

### **1. 输入变量定义**

为了建立数学模型，我们首先定义以下输入变量：

* **任务开始时间**：小时 $a$ (a ∈ [0, 23])，分钟 $b$ (b ∈ [0, 59])。
* **任务总时长** (分钟)：$t$。
* **使用者疲劳状态**：$f$ (f ∈ {1, 2, 3, 4, 5})。
* **任务专注状态**：$M$。根据您的要求，这是一个选项，我们将其量化为：
    * 专注聚焦：$M = 1$
    * 思维发散：$M = -1$

### **2. 中间变量计算**

为了简化后续公式，我们首先计算一些中间变量：

* **任务开始时间的分钟表示** (从当日00:00算起)：
    $$c = a \times 60 + b$$
* **任务在17:00前持续的时长** (分钟)：
    $$t_{before17} = \max(0, \min(c + t, 1020) - c)$$
    *注：17:00 等于 $17 \times 60 = 1020$ 分钟。*

### **3. 各阶段光照时长计算**

整个任务时段 $t$ 将被划分为三个部分：强蓝光唤醒 ($T_{wakeup}$)，适度光照 ($T_{moderate}$)，以及低光照 ($T_{low}$)。

#### **第一阶段：强蓝光唤醒时长 ($T_{wakeup}$)**

此阶段的时长取决于任务开始时间 $a$ 和疲劳度 $f$：

$T_{wakeup} = \begin{cases} 0 & \text{if } a \ge 17 \\ 0.20 \times t & \text{if } 12 \le a < 17 \text{ and } f = 5 \\ 0.15 \times t & \text{if } 12 \le a < 17 \text{ and } f = 4 \\ 0 & \text{if } 12 \le a < 17 \text{ and } f \in \{1,2,3\} \\ t \times \frac{(0.7 + 0.1f) \times (30 - 0.0833 \times \max(c - 480, 0))}{100} & \text{if } a < 12 \end{cases}$

*注：公式中的480分钟代表上午8:00 ($8 \times 60 = 480$)*。

#### **第二阶段：适度光照时长 ($T_{moderate}$)**

根据文件中提供的策略，此阶段的计算公式可能在某些情况下（如“思维发散”型任务）产生负值。为了确保时长的非负性，我们采用 `max(0, ...)` 对结果进行处理，这表示如果计算结果为负，则此阶段时长为0。

* **计算光照占比 ($P_{moderate}$)**：
    $$P_{moderate} = 0.75 \times M + 0.25 \times \frac{t_{before17}}{t}$$

* **计算光照时长 ($T_{moderate}$)**：
    $$T_{moderate} = t \times \max(0, P_{moderate})$$

#### **第三阶段：低光照时长 ($T_{low}$)**

此阶段为总任务时长的剩余部分：

$$T_{low} = t - T_{wakeup} - T_{moderate}$$

### **4. 各阶段光照参数**

根据计算出的各阶段时长，应用如下的光照参数：

* **强蓝光唤醒阶段** (持续 $T_{wakeup}$ 时长)：
    * 色温 (CCT): $5800 \, K$
    * 照度 (E): $750 \, lx$

* **适度光照阶段** (持续 $T_{moderate}$ 时长)：
    * 如果任务总时长 $t > 90$ 分钟：
        * 色温 (CCT): $3000 \, K$
        * 照度 (E): $750 \, lx$
    * 如果任务总时长 $t \le 90$ 分钟：
        * 色温 (CCT): $4500 \, K$
        * 照度 (E): $450 \, lx$

* **低光照阶段** (持续 $T_{low}$ 时长)：
    * 色温 (CCT): $3000 \, K$
    * 照度 (E): $250 \, lx$